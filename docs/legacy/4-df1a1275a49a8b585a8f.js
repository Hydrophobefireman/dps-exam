webpackJsonp([4], function(__wpcc){'use strict';var X=function(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a},zc=function(a){return(a+"").replace(yc,"").toLowerCase()},Y=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];__wpcc.y.apply(this,[].concat(__wpcc.p.arrayFromIterable(b)));var d=this;X(this,"state",{showCount:100,value:""});X(this,"increment",function(){return d.setState(function(a){return{showCount:a.showCount+100}})});X(this,"setFilter",
function(a){var b=a.target.value;Ac(function(){return d.setState({value:b,showCount:100})})});X(this,"expandStudentDetails",function(a){return d.setState(function(b){var c=+a.target.dataset.student_scholar;return{expandScholar:b.expandScholar===c?-1:c}})});X(this,"resetScores",function(a,b){return function(){d.state.isResetting||(d.setState({isResetting:!0}),__wpcc.I(__wpcc.P.resetSubject,{token:d.props.token,scholar:a,subject:b}).then(function(a){return d.setState({data:a,value:"",expandScholar:null,
isResetting:!1})}))}});X(this,"_applyGradeFilter",function(a){return d.setState(function(b){var c=+a.target.dataset.class;c===b.filterGrade&&(c=null);return{filterGrade:+c,showCount:100}})})},Bc=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];__wpcc.y.apply(this,[].concat(__wpcc.p.arrayFromIterable(b)));var d=this;X(this,"state",{waitingForResetConfirmation:!1,subjectReset:null});X(this,"_confirmReset",function(a){return d.setState({waitingForResetConfirmation:!0,subjectReset:a.target.dataset.subject})});
X(this,"_cancel",function(){return d.setState({waitingForResetConfirmation:!1,subjectReset:null})})},Cc=function(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a},Dc=function(a){var b;return __wpcc.p.asyncExecutePromiseGeneratorProgram(function(c){if(1==c.nextAddress)return c.yield(__wpcc.I(__wpcc.P.getAllStudents,{token:a}),2);b=c.yieldResult;return b.error?c.return(function(){return __wpcc.v("div",null,b.error)}):c.return(function(){return __wpcc.v(Y,
{data:b,token:a})})})},Ec=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];__wpcc.y.apply(this,[].concat(__wpcc.p.arrayFromIterable(b)));var d=this;Cc(this,"state",{value:"",submittedToken:!1});Cc(this,"handleSubmit",function(){return d.setState({submittedToken:!0})});Cc(this,"handleInput",function(a){return d.setState({value:(a.target.value||"").trim()})})},Fc=__wpcc.O.getStrings(),Ac=window.requestAnimationFrame||window.Promise&&Promise.prototype.then.bind(Promise.resolve())||
setTimeout,yc=/\s/g;__wpcc.p.inherits(Y,__wpcc.y);Y.prototype.applyFilter=function(a){var b=this,c=(this.state.value||"").trim();return c||this.state.filterGrade?a.filter(function(a){if(b.state.filterGrade&&a.grade!==b.state.filterGrade)return!1;var d=a.name;return zc(a.scholar).includes(zc(c))||zc(d).includes(zc(c))}):a};Y.prototype.componentDidMount=function(){this.setState({data:this.props.data})};
Y.prototype.getStudents=function(){var a=this.state.data;if(a){a=this.applyFilter(a);for(var b=Math.min(this.state.showCount,a.length),c=Array(b),d=this.state.expandScholar,e=0;e<b;e++){var h=a[e];c[e]=__wpcc.v("div",null,__wpcc.v("div",{onClick:this.expandStudentDetails,class:"student-item","data-student_scholar":h.scholar},__wpcc.v("div",{class:"schlr"},h.scholar),__wpcc.v("div",{class:"student-name"},a[e].name),__wpcc.v("div",{class:"more-info"})),d===h.scholar&&__wpcc.v(Bc,{student:h,index:e,
shouldExpand:!0,resetScores:this.resetScores}))}return c}};
Y.prototype.render=function(a,b){a=this.getStudents();return __wpcc.v("div",null,__wpcc.v("input",{class:"form-inx",placeholder:"Search",onInput:this.setFilter,value:b.value}),__wpcc.v("div",{class:"filter-by-class"},__wpcc.v("button",{class:"filter-button hoverable","data-class":10,onClick:this._applyGradeFilter},"Class 10"),__wpcc.v("button",{class:"filter-button hoverable","data-class":12,onClick:this._applyGradeFilter},"Class 12")),__wpcc.v("div",null,"Currently showing ",b.filterGrade?"Class "+
b.filterGrade:"All"," students"),__wpcc.v("div",null,a),a&&b.showCount===a.length&&__wpcc.v("button",{class:"show-more hoverable",onClick:this.increment},"Load More"))};__wpcc.p.inherits(Bc,__wpcc.y);
Bc.prototype.render=function(a,b){var c=this,d=a.student;return b.waitingForResetConfirmation?__wpcc.v(__wpcc.K,{cancel:this._cancel,title:"Are you sure?",errorHead:Fc.Admin$AboutToExecuteReset(d.name,d.scholar,b.subjectReset),close:this.props.resetScores(d.scholar,b.subjectReset)}):__wpcc.v("div",{class:"student-details"+(a.shouldExpand?" show-data":"")},__wpcc.v("div",{class:"student-details-table-like"},__wpcc.v("div",{class:"info-field"},__wpcc.v("div",{class:"bold"},"Class"),__wpcc.v("span"),
__wpcc.v("div",null,d.grade)),__wpcc.v("div",{style:{fontWeight:"bold"}},"Results:"),(0,__wpcc.cb)(d.testing_info||{}).map(function(a){var b=__wpcc.p.makeIterator(a);a=b.next().value;b=b.next().value;return __wpcc.v("div",{class:"info-field"},__wpcc.v("div",{class:"bold"},a),__wpcc.v("div",null,b.score),__wpcc.v("div",{onClick:c._confirmReset,class:"reset-score hoverable","data-subject":a},"Reset"))})))};var Gc=__wpcc.O.getStrings();__wpcc.p.inherits(Ec,__wpcc.y);
Ec.prototype.render=function(a,b){return this.state.submittedToken?__wpcc.v(__wpcc.A,{componentPromise:function(){return Dc(b.value)},fallbackComponent:function(){return Gc.Loading$Default}}):__wpcc.v("div",{style:Object.assign({},__wpcc.F,{flexDirection:"column"})},__wpcc.v("div",null,"Admin Dashboard"),__wpcc.v("form",{style:{width:"60%"},action:"javascript:",onSubmit:this.handleSubmit},__wpcc.v("input",{class:"form-inx",value:b.value,onInput:this.handleInput,placeholder:"Password",type:"password"}),
__wpcc.v("div",null,__wpcc.v("button",{class:"action-btn",style:{marginTop:"1rem",visibility:b.value?"visible":"hidden"}},Gc.Login$login))))};__wpcc.ac={};__wpcc.ac.default=Ec;});
