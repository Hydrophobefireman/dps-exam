webpackJsonp([4], function(__wpcc){'use strict';var am=function(a){return __wpcc.T("span",{"data-rich":1},a.data.map(function(a){return $l(a)}))},$l=function(a){var b=a.type;a=a.value;switch(b){case "sup":case "div":case "sub":return __wpcc.T(b,null,a);case "inline-img":return __wpcc.T("span",{class:"opt-image-container"},__wpcc.T("img",{src:a,class:"opt-img"}));case "img":return __wpcc.T("div",{style:"text-align:center"},__wpcc.T("img",{src:a,class:"opt-img"}));case "underline":case "bold":return __wpcc.T("span",{class:b},a);default:return __wpcc.T("span",
null,a)}},bm=function(a){return"object"===typeof a?__wpcc.T(am,{data:a}):String(a)},dm=function(a){var b=a.x,c=a.i,d=a.setOption;a=a.answered;return __wpcc.T("div",{class:"question-body"},__wpcc.T("div",{class:"question-text"},"Q.",c+1,__wpcc.T("span",{class:"q-main"},bm(b.question))),__wpcc.T(cm,{options:b.options,onClick:d,questionIndex:c,answered:a}))},cm=function(a){return __wpcc.T("div",null,a.options.map(function(b,c){return __wpcc.T("div",{class:"option-box"},__wpcc.T("span",{class:"readable-name"},
em[c]),__wpcc.T("div",{onClick:a.onClick,class:"question-choice"+(c===a.answered?" selected":""),"data-option_index":c,"data-question_index":a.questionIndex},bm(b)))}))},fm=function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a},gm=function(a,b){a.prototype=Object.create(b.prototype);a.prototype.constructor=a;a.__proto__=b},hm=function(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=
c;return a},im=function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a},jm=function(a,b){a.prototype=Object.create(b.prototype);a.prototype.constructor=a;a.__proto__=b},km=function(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a};__wpcc.G({target:"Array",proto:!0},{fill:function(a){var b=__wpcc.Wb(this),c=__wpcc.La(b.length),d=arguments.length,e=__wpcc.Oa(1<d?arguments[1]:void 0,c);d=2<d?arguments[2]:void 0;for(c=void 0===d?c:__wpcc.Oa(d,c);c>e;)b[e++]=a;return b}});__wpcc.Fc("fill");var lm=__wpcc.Kc("some"),mm=__wpcc.Jc("some");__wpcc.G({target:"Array",proto:!0,forced:!lm||!mm},{some:function(a){return(0,__wpcc.O.some)(this,a,1<arguments.length?arguments[1]:void 0)}});var em={0:"A",1:"B",2:"C",3:"D"};var nm=function(a){function b(){for(var b,c=arguments.length,f=Array(c),g=0;g<c;g++)f[g]=arguments[g];b=a.call.apply(a,[this].concat(f))||this;hm(fm(b),"tFix",function(a){a=""+a;return(1===a.length?"0":"")+a});hm(fm(b),"__startTicks",function(){return b.parseTime()});return b}gm(b,a);var c=b.prototype;c.parseTime=function(){var a=this.props,b=+new Date;a=a.timeLeft-(b-a.prevTime)/1E3;var c=Math.floor(a/3600);var g=a%3600;var h=Math.floor(g/60);g=Math.round(g%60);this.props.setTimeLeft(a,b);this.setState({hours:c,
mins:h,sec:g})};c.componentDidUpdate=function(){var a=this.state,b=a.hours,c=a.mins;a=a.sec;if(0===b&&0===c&&0===a||[b,c,a].some(function(a){return 0>a}))return clearInterval(this.___interval),this.props.timeOver()};c.componentDidMount=function(){this.___interval=setInterval(this.__startTicks,1E3)};c.componentWillUnmount=function(){clearInterval(this.___interval)};c.render=function(a,b){a=this.tFix;if(!("hours"in b&&"mins"in b&&"sec"in b))return"";var c=b.hours,d=b.mins;b=b.sec;return[c,d,b].some(function(a){return 0>
a})?"":a(c)+":"+a(d)+":"+a(b)};return b}(__wpcc.Pf);var om,Z,pm;om=__wpcc.Y.getStore();Z=__wpcc.Y.getStrings();
pm=function(a){function b(){for(var b,c=arguments.length,f=Array(c),g=0;g<c;g++)f[g]=arguments[g];b=a.call.apply(a,[this].concat(f))||this;km(im(b),"state",{isFetching:!1,questions:null,answers:null,timeOver:!1});km(im(b),"timeOver",function(){b.setState({timeOver:!0,forceSubmit:!0,answers:b.state.answers.slice().map(function(a){return null==a?-1:a})})});km(im(b),"timeLeft",function(a,c){return b.setState({timeLeft:a,prevTime:c})});km(im(b),"_submit",function(){if(!b.state.results&&!b.state.awaitingScore){var a=
b.state.answers,c=om.userData.scholar,d=b.state.questions.subject;if(!b.state.forceSubmit){var e=[];a.forEach(function(a,b){return null==a&&e.push(b+1)});if(e.length)return b.setState({$AnswerError:e.join(", ")})}b.setState({awaitingScore:!0});__wpcc.rg(__wpcc.rl.gradeTest,{scholar:c,subject:d,answers:a}).then(function(a){if(a.error)return b.setState({error:a.error,awaitingScore:!1,timeOver:!1});__wpcc.Y.set("userData",a.user_data);b.setState({results:a,awaitingScore:!1,timeOver:!1})})}});km(im(b),
"_answerQuestion",function(a){var c=a.target.dataset;a=+c.question_index;c=+c.option_index;b.state.answers[a]===c&&(c=null);var d=b.state.answers.slice();d[a]=c;__wpcc.rg(__wpcc.rl.quickSave,{subject:b.state.questions.subject,answers:d});b.setState({answers:d})});km(im(b),"_closePopup",function(){return b.setState({timeOver:!1})});km(im(b),"_clearError",function(){return b.setState({$AnswerError:null})});km(im(b),"__closeTest",function(){return __wpcc.Vf("/profile")});return b}jm(b,a);var c=b.prototype;
c.componentDidUpdate=function(){!this.state.timeOver||this.state.awaitingScore||this.state.results||this._submit()};c.componentDidMount=function(){var a=this;if(!om.isLoggedIn)return __wpcc.Vf("/");var b=(new URLSearchParams(__wpcc.dg.getQs)).get("sub");if(!b)return this.setState({error:Z.Exam$Invalid});this.setState({isFetching:!0});__wpcc.rg(__wpcc.rl.startTest,{scholar:om.userData.scholar,subject:b.trim()}).then(function(b){if(b.error)return a.setState({error:b.error,isFetching:!1});var c=b.previous_answers||
[],d;c.length&&c.some(function(a){return null!=a})&&(d=c);a.setState({questions:b,isFetching:!1,prevTime:+new Date,answers:d||Array(b.question_data.length).fill(null),timeLeft:b.time_allotted-(b.now-b.start_time)})})};c.render=function(a,b){var c=this;return b.error?__wpcc.T(__wpcc.Hg,{reasons:[b.error],close:this.__closeTest}):b.$AnswerError?__wpcc.T(__wpcc.Fg,{close:this._clearError,title:Z.Exam$UnansweredQuestionsLeft,errorHead:Z.Exam$NoNegativeMarking,reasons:[b.$AnswerError]}):b.isFetching?__wpcc.T("div",
{style:__wpcc.Xf},Z.Exam$LoadingQuestions):b.timeOver?__wpcc.T(__wpcc.Fg,{close:this._closePopup,title:Z.Exam$TimeUp,errorHead:Z.Exam$TimeUpAnswerSubmitInfo}):b.awaitingScore?__wpcc.T("div",{style:__wpcc.Xf},Z.Exam$CalculatingScore):b.results?__wpcc.T(__wpcc.Fg,{close:this.__closeTest,title:Z.Exam$ResultText,errorHead:__wpcc.T(__wpcc.rf,null,__wpcc.T("div",null,Z.Exam$MaximumMarks+b.results.total),__wpcc.T("div",null,Z.Exam$YourScore)),reasons:[b.results.score]}):b.questions&&__wpcc.T("div",null,
__wpcc.T("div",{class:"exam-header"},"class ",b.questions.grade," - ",b.questions.subject," test"),__wpcc.T("div",{class:"total-time"},Z.Exam$TimeAllotted,__wpcc.T("span",{class:"bold"},__wpcc.Ig(b.questions.time_allotted))),__wpcc.T("span",{class:"t-left"},Z.Exam$TimeLeft,__wpcc.T(nm,{timeOver:this.timeOver,setTimeLeft:this.timeLeft,timeLeft:b.timeLeft,prevTime:b.prevTime})),__wpcc.T("div",{class:"questions-container"},b.questions.question_data.map(function(a,d){return __wpcc.T(dm,{x:a,i:d,setOption:b.timeOver?
null:c._answerQuestion,answered:b.answers[d]})})),__wpcc.T("button",{class:"submit-exam hoverable",onClick:this._submit},Z.Exam$Submit))};return b}(__wpcc.Pf);__wpcc.ll={};__wpcc.ll.default=pm;});
