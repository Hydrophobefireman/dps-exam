(window.webpackJsonpexam_app=window.webpackJsonpexam_app||[]).push([[873],{873:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w});var i=s(386),r=s(596),n=s(77),a=s(804),o=s(264),l=s(121);function c(e){const t=e.data;return(0,i.h)("span",{"data-rich":1},t.map(e=>function(e){const t=e.type,s=e.value;switch(t){case"sup":case"div":case"sub":return(0,i.h)(t,null,s);case"inline-img":return(0,i.h)("span",{class:"opt-image-container"},(0,i.h)("img",{src:s,class:"opt-img"}));case"img":return(0,i.h)("div",{style:"text-align:center"},(0,i.h)("img",{src:s,class:"opt-img"}));case"underline":case"bold":return(0,i.h)("span",{class:t},s);case"text":default:return(0,i.h)("span",null,s)}}(e)))}const u={0:"A",1:"B",2:"C",3:"D"};function h(e){const{x:t,i:s,setOption:r,answered:n}=e;return(0,i.h)("div",{class:"question-body"},(0,i.h)("div",{class:"question-text"},"Q.",s+1,(0,i.h)("span",{class:"q-main"},"object"!=typeof t.question?String(t.question):(0,i.h)(c,{data:t.question}))),(0,i.h)(d,{options:t.options,onClick:r,questionIndex:s,answered:n}))}function d(e){return(0,i.h)("div",null,e.options.map((t,s)=>(0,i.h)("div",{class:"option-box"},(0,i.h)("span",{class:"readable-name"},u[s]),(0,i.h)("div",{onClick:e.onClick,class:"question-choice"+(s===e.answered?" selected":""),"data-option_index":s,"data-question_index":e.questionIndex},"object"!=typeof t?String(t):(0,i.h)(c,{data:t})))))}function m(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class p extends i.wA{constructor(...e){super(...e),m(this,"tFix",e=>(1===(e=""+e).length?"0":"")+e),m(this,"__startTicks",()=>this.parseTime())}parseTime(){const e=this.props,t=+new Date,s=e.timeLeft-(t-e.prevTime)/1e3;let i;const r=s,n=Math.floor(r/3600);i=r%3600;const a=Math.floor(i/60);i=Math.round(i%60);const o=i;this.props.setTimeLeft(s,t),this.setState({hours:n,mins:a,sec:o})}componentDidUpdate(){const{hours:e,mins:t,sec:s}=this.state;if(0===e&&0===t&&0===s||[e,t,s].some(e=>e<0))return clearInterval(this.___interval),this.props.timeOver()}componentDidMount(){this.___interval=setInterval(this.__startTicks,1e3)}componentWillUnmount(){clearInterval(this.___interval)}render(e,t){const s=this.tFix;if(!("hours"in t&&"mins"in t&&"sec"in t))return"";const{hours:i,mins:r,sec:n}=t;return[i,r,n].some(e=>e<0)?"":`${s(i)}:${s(r)}:${s(n)}`}}function v(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const f=a.h.getStore();class w extends i.wA{constructor(...e){super(...e),v(this,"state",{isFetching:!1,questions:null,answers:null,timeOver:!1}),v(this,"timeOver",()=>{this.setState({timeOver:!0,forceSubmit:!0,answers:this.state.answers.slice().map(e=>null==e?-1:e)})}),v(this,"timeLeft",(e,t)=>this.setState({timeLeft:e,prevTime:t})),v(this,"_submit",()=>{if(this.state.results||this.state.awaitingScore)return;const e=this.state.answers,t=f.userData.scholar,s=this.state.questions.subject;if(!this.state.forceSubmit){const t=[];if(e.forEach((e,s)=>null==e&&t.push(s+1)),t.length)return this.setState({$AnswerError:t.join(", ")})}this.setState({awaitingScore:!0}),(0,r.VN)(n.WX.gradeTest,{scholar:t,subject:s,answers:e}).then(e=>{if(e.error)return this.setState({error:e.error,awaitingScore:!1,timeOver:!1});a.h.set("userData",e.user_data),this.setState({results:e,awaitingScore:!1,timeOver:!1})})}),v(this,"_answerQuestion",e=>{const t=e.target.dataset,s=+t.question_index;let i=+t.option_index;this.state.answers[s]===i&&(i=null);const r=this.state.answers.slice();r[s]=i,this.setState({answers:r})}),v(this,"_closePopup",()=>this.setState({timeOver:!1})),v(this,"_clearError",()=>this.setState({$AnswerError:null})),v(this,"__closeTest",()=>(0,i.uX)("/"))}componentDidUpdate(){!this.state.timeOver||this.state.awaitingScore||this.state.results||this._submit()}componentDidMount(){if(!f.isLoggedIn)return(0,i.uX)("/");const e=new URLSearchParams(i.F0.getQs).get("sub");if(!e)return this.setState({error:"Invalid Exam"});this.setState({isFetching:!0}),(0,r.VN)(n.WX.startTest,{scholar:f.userData.scholar,subject:e.trim()}).then(e=>{if(e.error)return this.setState({error:e.error,isFetching:!1});this.setState({questions:e,isFetching:!1,prevTime:+new Date,answers:Array(e.question_data.length).fill(null),timeLeft:e.time_allotted-(e.now-e.start_time)})})}render(e,t){return t.error?(0,i.h)(l.OK,{reasons:[t.error],close:this.__closeTest}):t.$AnswerError?(0,i.h)(l.GI,{close:this._clearError,title:"Unanswered Questions Left",errorHead:"There is no negative marking. Please answer the following questions",reasons:[t.$AnswerError]}):t.isFetching?(0,i.h)("div",{style:o.Kx},"Loading questions"):t.timeOver?(0,i.h)(l.GI,{close:this._closePopup,title:"Time up",errorHead:"Your answers are being submitted"}):t.awaitingScore?(0,i.h)("div",{style:o.Kx},"Calculating your score"):t.results?(0,i.h)(l.GI,{close:this.__closeTest,title:"Results",errorHead:(0,i.h)(i.HY,null,(0,i.h)("div",null,"Maximum Marks: "+t.results.total),(0,i.h)("div",null,"Your score: ")),reasons:[t.results.score]}):t.questions&&(0,i.h)("div",null,(0,i.h)("div",{class:"exam-header"},"class ",t.questions.grade," - ",t.questions.subject," test"),(0,i.h)("div",{class:"total-time"},"Time allotted - ",(0,i.h)("span",{class:"bold"},(0,l.bT)(t.questions.time_allotted))),(0,i.h)("span",{class:"t-left"},"Time Left - ",(0,i.h)(p,{timeOver:this.timeOver,setTimeLeft:this.timeLeft,timeLeft:t.timeLeft,prevTime:t.prevTime})),(0,i.h)("div",{class:"questions-container"},t.questions.question_data.map((e,s)=>(0,i.h)(h,{x:e,i:s,setOption:t.timeOver?null:this._answerQuestion,answered:t.answers[s]}))),(0,i.h)("button",{class:"submit-exam hoverable",onClick:this._submit},"Submit"))}}},121:(e,t,s)=>{"use strict";s.d(t,{OK:()=>r,GI:()=>n,bT:()=>a});var i=s(386);function r(e){return(0,i.h)(n,{...e,title:"An error occured"})}class n extends i.wA{constructor(...e){var t,s,i;super(...e),t=this,s="__id",i=Math.random(),s in t?Object.defineProperty(t,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[s]=i}componentDidMount(){const e=document.getElementById(""+this.__id);e&&e.focus()}render(e){return(0,i.h)(i.HY,null,(0,i.h)("div",{class:"mask"}),(0,i.h)("div",{class:"app-popup"},(0,i.h)("div",{class:"heading-text clr app-popup-title"},e.title),(0,i.h)("div",null,e.errorHead),(0,i.h)("div",{class:"err-reasons"},(0,i.h)("div",null,(e.reasons||[]).map(e=>(0,i.h)("div",null," - ",e)))),(0,i.h)("button",{id:this.__id,class:"app-popup-close",onClick:e.close},"OK")))}}const a=e=>{const t=Math.floor(e/3600),s=e%3600/60;var i,r;return`${""+(t>0?`${t} ${i=t,r="hour",1===i?r:r+"s"}`:"")}${s>0?` ${s} mins`:""}`}}}]);