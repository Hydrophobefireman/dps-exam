(window.webpackJsonpexam_app=window.webpackJsonpexam_app||[]).push([[843],{843:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s(386),i=s(596),n=s(77),a=s(804),o=s(264),l=s(121),c=s(323);function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class h extends r.wA{constructor(...e){super(...e),u(this,"tFix",e=>(1===(e=""+e).length?"0":"")+e),u(this,"__startTicks",()=>this.parseTime())}parseTime(){const e=this.props,t=+new Date,s=e.timeLeft-(t-e.prevTime)/1e3;let r;const i=s,n=Math.floor(i/3600);r=i%3600;const a=Math.floor(r/60);r=Math.round(r%60);const o=r;this.props.setTimeLeft(s,t),this.setState({hours:n,mins:a,sec:o})}componentDidUpdate(){const{hours:e,mins:t,sec:s}=this.state;if(0===e&&0===t&&0===s||[e,t,s].some(e=>e<0))return clearInterval(this.___interval),this.props.timeOver()}componentDidMount(){this.___interval=setInterval(this.__startTicks,1e3)}componentWillUnmount(){clearInterval(this.___interval)}render(e,t){const s=this.tFix;if(!("hours"in t&&"mins"in t&&"sec"in t))return"";const{hours:r,mins:i,sec:n}=t;return[r,i,n].some(e=>e<0)?"":`${s(r)}:${s(i)}:${s(n)}`}}function m(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const d=a.h.getStore(),p=a.h.getStrings();class v extends r.wA{constructor(...e){super(...e),m(this,"state",{isFetching:!1,questions:null,answers:null,timeOver:!1}),m(this,"timeOver",()=>{this.setState({timeOver:!0,forceSubmit:!0,answers:this.state.answers.slice().map(e=>null==e?-1:e)})}),m(this,"timeLeft",(e,t)=>this.setState({timeLeft:e,prevTime:t})),m(this,"_submit",()=>{if(this.state.results||this.state.awaitingScore)return;const e=this.state.answers,t=d.userData.scholar,s=this.state.questions.subject;if(!this.state.forceSubmit){const t=[];if(e.forEach((e,s)=>null==e&&t.push(s+1)),t.length)return this.setState({$AnswerError:t.join(", ")})}this.setState({awaitingScore:!0}),(0,i.VN)(n.WX.gradeTest,{scholar:t,subject:s,answers:e}).then(e=>{if(e.error)return this.setState({error:e.error,awaitingScore:!1,timeOver:!1});a.h.set("userData",e.user_data),this.setState({results:e,awaitingScore:!1,timeOver:!1})})}),m(this,"_answerQuestion",e=>{const t=e.target.dataset,s=+t.question_index;let r=+t.option_index;this.state.answers[s]===r&&(r=null);const a=this.state.answers.slice();a[s]=r,(0,i.VN)(n.WX.quickSave,{subject:this.state.questions.subject,answers:a}),this.setState({answers:a})}),m(this,"_closePopup",()=>this.setState({timeOver:!1})),m(this,"_clearError",()=>this.setState({$AnswerError:null})),m(this,"__closeTest",()=>(0,r.uX)("/profile"))}componentDidUpdate(){!this.state.timeOver||this.state.awaitingScore||this.state.results||this._submit()}componentDidMount(){if(!d.isLoggedIn)return(0,r.uX)("/");const e=new URLSearchParams(r.F0.getQs).get("sub");if(!e)return this.setState({error:p.Exam$Invalid});this.setState({isFetching:!0}),(0,i.VN)(n.WX.startTest,{scholar:d.userData.scholar,subject:e.trim()}).then(e=>{if(e.error)return this.setState({error:e.error,isFetching:!1});let t,s=e.previous_answers||[];s.length&&s.some(e=>null!=e)&&(t=s),this.setState({questions:e,isFetching:!1,prevTime:+new Date,answers:t||Array(e.question_data.length).fill(null),timeLeft:e.time_allotted-(e.now-e.start_time)})})}render(e,t){return t.error?(0,r.h)(l.OK,{reasons:[t.error],close:this.__closeTest}):t.$AnswerError?(0,r.h)(l.GI,{close:this._clearError,title:p.Exam$UnansweredQuestionsLeft,errorHead:p.Exam$NoNegativeMarking,reasons:[t.$AnswerError]}):t.isFetching?(0,r.h)("div",{style:o.Kx},p.Exam$LoadingQuestions):t.timeOver?(0,r.h)(l.GI,{close:this._closePopup,title:p.Exam$TimeUp,errorHead:p.Exam$TimeUpAnswerSubmitInfo}):t.awaitingScore?(0,r.h)("div",{style:o.Kx},p.Exam$CalculatingScore):t.results?(0,r.h)(l.GI,{close:this.__closeTest,title:p.Exam$ResultText,errorHead:(0,r.h)(r.HY,null,(0,r.h)("div",null,p.Exam$MaximumMarks+t.results.total),(0,r.h)("div",null,p.Exam$YourScore)),reasons:[t.results.score]}):t.questions&&(0,r.h)("div",null,(0,r.h)("div",{class:"exam-header"},"class ",t.questions.grade," - ",t.questions.subject," test"),(0,r.h)("div",{class:"total-time"},p.Exam$TimeAllotted,(0,r.h)("span",{class:"bold"},(0,l.bT)(t.questions.time_allotted))),(0,r.h)("span",{class:"t-left"},p.Exam$TimeLeft,(0,r.h)(h,{timeOver:this.timeOver,setTimeLeft:this.timeLeft,timeLeft:t.timeLeft,prevTime:t.prevTime})),(0,r.h)("div",{class:"questions-container"},t.questions.question_data.map((e,s)=>(0,r.h)(c.Z,{x:e,i:s,setOption:t.timeOver?null:this._answerQuestion,answered:t.answers[s]}))),(0,r.h)("button",{class:"submit-exam hoverable",onClick:this._submit},p.Exam$Submit))}}},323:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var r=s(386);function i(e){const t=e.data;return(0,r.h)("span",{"data-rich":1},t.map(e=>function(e){const t=e.type,s=e.value;switch(t){case"sup":case"div":case"sub":return(0,r.h)(t,null,s);case"inline-img":return(0,r.h)("span",{class:"opt-image-container"},(0,r.h)("img",{src:s,class:"opt-img"}));case"img":return(0,r.h)("div",{style:"text-align:center"},(0,r.h)("img",{src:s,class:"opt-img"}));case"underline":case"bold":return(0,r.h)("span",{class:t},s);case"text":default:return(0,r.h)("span",null,s)}}(e)))}const n={0:"A",1:"B",2:"C",3:"D"},a=e=>"object"==typeof e?(0,r.h)(i,{data:e}):String(e);function o(e){const{x:t,i:s,setOption:i,answered:n}=e;return(0,r.h)("div",{class:"question-body"},(0,r.h)("div",{class:"question-text"},"Q.",s+1,(0,r.h)("span",{class:"q-main"},a(t.question))),(0,r.h)(l,{options:t.options,onClick:i,questionIndex:s,answered:n,correct:t.correct}))}function l(e){return(0,r.h)("div",null,e.options.map((t,s)=>{const i=e.correct===s;return(0,r.h)("div",{class:"option-box"},(0,r.h)("span",{class:"readable-name"},n[s]),(0,r.h)("div",{onClick:e.onClick,class:`question-choice${s===e.answered?" selected":""}${i?" correct":""}`,"data-option_index":s,"data-question_index":e.questionIndex},a(t)))}))}},121:(e,t,s)=>{"use strict";s.d(t,{OK:()=>n,GI:()=>a,bT:()=>o,uS:()=>u});var r=s(386);const i=s(804).h.getStrings();function n(e){return(0,r.h)(a,{...e,title:i.Error$TitleDefault})}class a extends r.wA{constructor(...e){var t,s,r;super(...e),t=this,s="__id",r=Math.random(),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r}componentDidMount(){const e=document.getElementById(""+this.__id);e&&e.focus()}render(e){return(0,r.h)(r.HY,null,(0,r.h)("div",{class:"mask",onClick:e.cancel},(0,r.h)("div",{class:"app-popup"},(0,r.h)("div",{class:"heading-text clr app-popup-title"},e.title),(0,r.h)("div",null,e.errorHead),(0,r.h)("div",{class:"err-reasons"},(0,r.h)("div",null,(e.reasons||[]).map(e=>(0,r.h)("div",null,e)))),(0,r.h)("button",{id:this.__id,class:"app-popup-close",onClick:e.close},"OK"))))}}const o=e=>{const t=Math.floor(e/3600),s=e%3600/60;var r,i;return`${""+(t>0?`${t} ${r=t,i="hour",1===r?i:i+"s"}`:"")}${s>0?` ${s} mins`:""}`};const l={hour:"numeric",hour12:!0,minute:"numeric"},c="undefined"!=typeof Intl;function u(e){const t=new Date(e);try{if(c){const e=new Date;return t.getFullYear()!==e.getFullYear()&&(l.year="numeric"),r=e,((s=t).getFullYear()!==r.getFullYear()||s.getMonth()!==r.getMonth()||s.getDate()!==r.getDate())&&(l.month=l.day="numeric"),Intl.DateTimeFormat("en-in",l).format(t).toUpperCase()}}catch(e){return console.log(e)}var s,r;return t.toLocaleString()}}}]);