webpackJsonp([4], function(__wpcc){'use strict';var Z=function(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a},sc=function(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a},uc=function(a){return __wpcc.m.asyncExecutePromiseGeneratorFunction(function*(){const b=yield __wpcc.I(__wpcc.R.getAllStudents,{token:a});return b.error?()=>__wpcc.v("div",null,b.error):()=>__wpcc.v(tc,{data:b,token:a})})};
const vc=__wpcc.P.getStrings(),wc=window.requestAnimationFrame||window.Promise&&Promise.prototype.then.bind(Promise.resolve())||setTimeout,xc=/\s/g;
var tc=class extends __wpcc.C{constructor(...a){super(...a);Z(this,"state",{showCount:100,value:""});Z(this,"increment",()=>this.setState(a=>({showCount:a.showCount+100})));Z(this,"setFilter",a=>{const b=a.target.value;wc(()=>this.setState({value:b,showCount:100}))});Z(this,"expandStudentDetails",a=>this.setState(b=>{const c=+a.target.dataset.student_scholar;return{expandScholar:b.expandScholar===c?-1:c}}));Z(this,"resetScores",(a,c)=>()=>{this.state.isResetting||(this.setState({isResetting:!0}),
__wpcc.I(__wpcc.R.resetSubject,{token:this.props.token,scholar:a,subject:c}).then(a=>this.setState({data:a,value:"",expandScholar:null,isResetting:!1})))});Z(this,"_applyGradeFilter",a=>this.setState(b=>{let c=+a.target.dataset.class;c===b.filterGrade&&(c=null);return{filterGrade:+c,showCount:100}}))}applyFilter(a){const b=(this.state.value||"").trim();return b||this.state.filterGrade?a.filter(a=>{if(this.state.filterGrade&&a.grade!==this.state.filterGrade)return!1;const {scholar:c,name:f}=a;(a=(c+
"").replace(xc,"").toLowerCase().includes((b+"").replace(xc,"").toLowerCase()))||(a=(f+"").replace(xc,"").toLowerCase().includes((b+"").replace(xc,"").toLowerCase()));return a}):a}componentDidMount(){this.setState({data:this.props.data})}getStudents(){var a=this.state.data;if(a){a=this.applyFilter(a);var b=Math.min(this.state.showCount,a.length),c=Array(b),d=this.state.expandScholar;for(let f=0;f<b;f++){const b=a[f];c[f]=__wpcc.v("div",null,__wpcc.v("div",{onClick:this.expandStudentDetails,class:"student-item",
"data-student_scholar":b.scholar},__wpcc.v("div",{class:"schlr"},b.scholar),__wpcc.v("div",{class:"student-name"},a[f].name),__wpcc.v("div",{class:"more-info"})),d===b.scholar&&__wpcc.v(yc,{student:b,index:f,shouldExpand:!0,resetScores:this.resetScores}))}return c}}render(a,b){a=this.getStudents();return __wpcc.v("div",null,__wpcc.v("input",{class:"form-inx",placeholder:"Search",onInput:this.setFilter,value:b.value}),__wpcc.v("div",{class:"filter-by-class"},__wpcc.v("button",{class:"filter-button hoverable",
"data-class":10,onClick:this._applyGradeFilter},"Class 10"),__wpcc.v("button",{class:"filter-button hoverable","data-class":12,onClick:this._applyGradeFilter},"Class 12")),__wpcc.v("div",null,"Currently showing ",b.filterGrade?"Class "+b.filterGrade:"All"," students"),__wpcc.v("div",null,a),a&&b.showCount===a.length&&__wpcc.v("button",{class:"show-more hoverable",onClick:this.increment},"Load More"))}};
var yc=class extends __wpcc.C{constructor(...a){super(...a);Z(this,"state",{waitingForResetConfirmation:!1,subjectReset:null});Z(this,"_confirmReset",a=>this.setState({waitingForResetConfirmation:!0,subjectReset:a.target.dataset.subject}));Z(this,"_cancel",()=>this.setState({waitingForResetConfirmation:!1,subjectReset:null}))}render(a,b){const c=a.student;return b.waitingForResetConfirmation?__wpcc.v(__wpcc.L,{cancel:this._cancel,title:"Are you sure?",errorHead:vc.Admin$AboutToExecuteReset(c.name,
c.scholar,b.subjectReset),close:this.props.resetScores(c.scholar,b.subjectReset)}):__wpcc.v("div",{class:"student-details"+(a.shouldExpand?" show-data":"")},__wpcc.v("div",{class:"student-details-table-like"},__wpcc.v("div",{class:"info-field"},__wpcc.v("div",{class:"bold"},"Class"),__wpcc.v("span"),__wpcc.v("div",null,c.grade)),__wpcc.v("div",{style:{fontWeight:"bold"}},"Results:"),(0,__wpcc.Xa)(c.testing_info||{}).map(([a,b])=>__wpcc.v("div",{class:"info-field"},__wpcc.v("div",{class:"bold"},a),
__wpcc.v("div",null,b.score),__wpcc.v("div",{onClick:this._confirmReset,class:"reset-score hoverable","data-subject":a},"Reset")))))}};const zc=__wpcc.P.getStrings();
var Ac=class extends __wpcc.C{constructor(...a){super(...a);sc(this,"state",{value:"",submittedToken:!1});sc(this,"handleSubmit",()=>this.setState({submittedToken:!0}));sc(this,"handleInput",a=>this.setState({value:(a.target.value||"").trim()}))}render(a,b){return this.state.submittedToken?__wpcc.v(__wpcc.Cb,{componentPromise:()=>uc(b.value),fallbackComponent:()=>zc.Loading$Default}):__wpcc.v("div",{style:Object.assign({},__wpcc.F,{flexDirection:"column"})},__wpcc.v("div",null,"Admin Dashboard"),
__wpcc.v("form",{style:{width:"60%"},action:"javascript:",onSubmit:this.handleSubmit},__wpcc.v("input",{class:"form-inx",value:b.value,onInput:this.handleInput,placeholder:"Password",type:"password"}),__wpcc.v("div",null,__wpcc.v("button",{class:"action-btn",style:{marginTop:"1rem",visibility:b.value?"visible":"hidden"}},zc.Login$login))))}};__wpcc.Vb={};__wpcc.Vb.default=Ac;});
