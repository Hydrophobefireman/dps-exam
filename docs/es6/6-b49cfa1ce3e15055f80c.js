webpackJsonp([6], function(__wpcc){'use strict';var Cc=function(a,b){return new Promise(c=>{let d;const e=()=>{clearTimeout(d);c()};a.addEventListener(b,e,{once:!0});a.addEventListener("error",e,{once:!0});d=setTimeout(e,d||5E3)})},Dc=function(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a},Fc=function(){return __wpcc.m.asyncExecutePromiseGeneratorFunction(function*(){const a=__wpcc.F.getCurrentParams("/report/:sub").sub.trim();if(!a)return()=>"Invalid Subject";const b=
yield __wpcc.H(__wpcc.R.getReport,{subject:a});return b.error?()=>__wpcc.v(__wpcc.lb,{errorHead:b.error,close:()=>__wpcc.D("/profile")}):()=>__wpcc.v(Ec,{data:b})})},Ec=function(a){a=a.data;return __wpcc.v("div",null,__wpcc.v("div",{class:"report-component"},Gc.Report$YourReportFor(a.subject)),__wpcc.v("div",null,Gc.Exam$YourScore," - ",a.score),__wpcc.v("div",null,Gc.Report$CorrectAnswers),__wpcc.v(Hc),__wpcc.v("div",{id:"answer-map",style:{backgroundColor:"var(--background-color)"}},a.question_data.map((a,
c)=>__wpcc.v(__wpcc.sb,{x:a,i:c}))))};const Ic=Array.from||(a=>[].slice.call(a)),Jc=a=>a,Kc=window.unescape||Jc,Lc=Promise.prototype.then.bind(Promise.resolve()),Mc=window.requestAnimationFrame||Lc||queueMicrotask,Nc=a=>Mc(()=>Mc(a));
var Z=class{constructor(a,b){this.options=b||{drawImgTagsOnCanvas:!1,timeout:5E3};this._svg=this._height=this._width=this._imgReadyForCanvas=this._img=null;this._canvas=document.createElement("canvas");this._canvasContext=this._canvas.getContext("2d");this._clonedChildren=this._sourceChildren=this._clonedNode=this._sourceNode=this._canvasState=null;a&&this.from(a);this._xmlSerializer=new XMLSerializer}static cloneStyle(a,b){a=getComputedStyle(a);const c=[];for(const b of a){const d=a.getPropertyValue(b);
d&&c.push(`${b}:${d};`)}b.style.cssText=c.join("")}static inlineImageIfPossible(a,b){if(0!==["blob","data"].indexOf(a.src.substr(0,4))){var c=Cc(a,"load",b).then(()=>{const c=document.createElement("canvas");c.height=a.height;c.width=a.width;var e=c.getContext("2d");e.drawImage(a,0,0);try{var h=!e.getImageData(0,0,1,1)}catch(k){h=!0}if(!h)return e=Cc(a,"load",b),a.src=c.toDataURL(),e});a.crossOrigin="anonymous";return c}}_clone(a){return a.cloneNode(!0)}from(a){this._width=this._height=0;this._canvasState=
Z.DRAW_PENDING;this._sourceNode=a;this._clonedNode=this._clone(this._sourceNode);this._sourceChildren=Ic(this._sourceNode.querySelectorAll("*"));this._clonedChildren=Ic(this._clonedNode.querySelectorAll("*"));return this}_cloneChildNodeStyle(){const a=this._clonedChildren,b=this._sourceChildren;for(let c=0;c<a.length;c++)Z.cloneStyle(b[c],a[c])}_walkChildNodes(){var a=this._clonedChildren;const b=[];for(const c of a)a=c.tagName,"SCRIPT"===a||"STYLE"===a||"HEAD"===a||"NOSCRIPT"===a||"none"===c.style.display?
c.remove():this.options.drawImgTagsOnCanvas&&"IMG"===a&&b.push(Z.inlineImageIfPossible(c,this.options.timeout));return b}_cleanMargin(){["margin","marginLeft","marginTop","marginBottom","marginRight"].forEach(a=>this._clonedNode.style[a]="")}_generateSVG(){var a=this._sourceNode,b=this._clonedNode;const c=a.scrollWidth;a=a.scrollHeight;b.setAttribute("xmlns","http://www.w3.org/1999/xhtml");b=this._xmlSerializer.serializeToString(b);this._svg=`<?xml version='1.0' encoding='UTF-8' ?><svg
    xmlns="http://www.w3.org/2000/svg"
      width="${c}"
      height="${a}">
      <foreignObject width="100%" height="100%" x="0" y="0">${b}</foreignObject>
    </svg>
   `;this._img=new Image(c,a);this._imgReadyForCanvas=Cc(this._img,"load",this.options.timeout);this._img.crossOrigin="anonymous";this._img.src=`data:image/svg+xml;charset=utf-8;base64,${btoa(Kc(encodeURIComponent(this._svg)))}`;this._width=c;this._height=a}_generateCanvas(){if(this._canvasState!==Z.DRAWN){var a=document.createElement("canvas"),b=a.getContext("2d");a.height=this._height;a.width=this._width;this._canvas=a;this._canvasContext=b}}_fillCanvas(){this._canvasState!==Z.DRAWN&&(this._canvasContext.drawImage(this._img,
0,0),this._canvasState=Z.DRAWN,this._clonedNode=this._sourceNode=this._clonedChildren=this._sourceChildren=this._imgReadyForCanvas=null)}screenshot(){return new Promise(a=>Nc(()=>{if(!this._clonedNode)throw Error("No source node has been specified");this._cloneChildNodeStyle();const b=this._walkChildNodes();return Promise.all(b).then(()=>{Z.cloneStyle(this._sourceNode,this._clonedNode);this._cleanMargin();this._generateSVG();return this._imgReadyForCanvas.then(()=>{this._imgReadyForCanvas=null;this._generateCanvas();
this._fillCanvas();a(this)})}).catch(b=>{console.log(b);a(this)})}))}drawImage(){return new Promise(a=>Nc(()=>{this._fillCanvas();return a(this)}))}toDataUri(a,b){return new Promise(c=>this.drawImage().then(()=>Nc(()=>c(this._canvas.toDataURL(a||"image/jpeg",b||1)))))}toBlob(a,b){return new Promise(c=>this.drawImage().then(()=>Nc(()=>this._canvas.toBlob(c,a||"image/jpeg",b||1))))}};Z.DRAW_PENDING=0;Z.DRAWN=1;const Gc=__wpcc.O.getStrings();
var Hc=class extends __wpcc.B{constructor(...a){super(...a);var b=this;Dc(this,"state",{currentAction:"Download Report"});Dc(this,"_download",function(){return __wpcc.m.asyncExecutePromiseGeneratorFunction(function*(){b.setState({currentAction:"Serializing Page Contents..."});var a=new Z(document.getElementById("answer-map"));yield a.screenshot();b.setState({currentAction:"Generating JPG.."});a=yield a.toDataUri("image/jpeg");const d=document.createElement("a");Object.assign(d,{download:`report-${+new Date}`,
href:a}).click();b.setState({currentAction:"Download Report"})})})}render(a,b){return __wpcc.v("button",{class:"dowload-report hoverable",onClick:this._download},b.currentAction)}};__wpcc.Xb={default:function(){return __wpcc.v(__wpcc.Db,{componentPromise:Fc,fallbackComponent:()=>Gc.Loading$Default})}};});
