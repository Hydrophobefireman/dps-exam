webpackJsonp([4], function(__wpcc){'use strict';var cc=function(a){return __wpcc.w("span",{"data-rich":1},a.data.map(a=>bc(a)))},bc=function(a){const b=a.type;a=a.value;switch(b){case "sup":case "div":case "sub":return __wpcc.w(b,null,a);case "inline-img":return __wpcc.w("span",{class:"opt-image-container"},__wpcc.w("img",{src:a,class:"opt-img"}));case "img":return __wpcc.w("div",{style:"text-align:center"},__wpcc.w("img",{src:a,class:"opt-img"}));case "underline":case "bold":return __wpcc.w("span",{class:b},a);default:return __wpcc.w("span",
null,a)}},fc=function(a){const {x:b,i:c,setOption:d,answered:e}=a;return __wpcc.w("div",{class:"question-body"},__wpcc.w("div",{class:"question-text"},"Q.",c+1,__wpcc.w("span",{class:"q-main"},dc(b.question))),__wpcc.w(ec,{options:b.options,onClick:d,questionIndex:c,answered:e}))},ec=function(a){return __wpcc.w("div",null,a.options.map((b,c)=>__wpcc.w("div",{class:"option-box"},__wpcc.w("span",{class:"readable-name"},gc[c]),__wpcc.w("div",{onClick:a.onClick,class:"question-choice"+(c===a.answered?
" selected":""),"data-option_index":c,"data-question_index":a.questionIndex},dc(b)))))},hc=function(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a},X=function(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a};const gc={0:"A",1:"B",2:"C",3:"D"},dc=a=>"object"===typeof a?__wpcc.w(cc,{data:a}):String(a);var ic=class extends __wpcc.D{constructor(...a){super(...a);hc(this,"tFix",a=>{a=""+a;return(1===a.length?"0":"")+a});hc(this,"__startTicks",()=>this.parseTime())}parseTime(){var a=this.props;const b=+new Date;a=a.timeLeft-(b-a.prevTime)/1E3;const c=Math.floor(a/3600);var d=a%3600;const e=Math.floor(d/60);d=Math.round(d%60);this.props.setTimeLeft(a,b);this.setState({hours:c,mins:e,sec:d})}componentDidUpdate(){const {hours:a,mins:b,sec:c}=this.state;if(0===a&&0===b&&0===c||[a,b,c].some(a=>0>a))return clearInterval(this.___interval),
this.props.timeOver()}componentDidMount(){this.___interval=setInterval(this.__startTicks,1E3)}componentWillUnmount(){clearInterval(this.___interval)}render(a,b){a=this.tFix;if(!("hours"in b&&"mins"in b&&"sec"in b))return"";const {hours:c,mins:d,sec:e}=b;return[c,d,e].some(a=>0>a)?"":`${a(c)}:${a(d)}:${a(e)}`}};const jc=__wpcc.Q.getStore(),Y=__wpcc.Q.getStrings();
var kc=class extends __wpcc.D{constructor(...a){super(...a);X(this,"state",{isFetching:!1,questions:null,answers:null,timeOver:!1});X(this,"timeOver",()=>{this.setState({timeOver:!0,forceSubmit:!0,answers:this.state.answers.slice().map(a=>null==a?-1:a)})});X(this,"timeLeft",(a,c)=>this.setState({timeLeft:a,prevTime:c}));X(this,"_submit",()=>{if(!this.state.results&&!this.state.awaitingScore){var a=this.state.answers,c=jc.userData.scholar,d=this.state.questions.subject;if(!this.state.forceSubmit){const b=
[];a.forEach((a,c)=>null==a&&b.push(c+1));if(b.length)return this.setState({$AnswerError:b.join(", ")})}this.setState({awaitingScore:!0});__wpcc.K(__wpcc.Gb.gradeTest,{scholar:c,subject:d,answers:a}).then(a=>{if(a.error)return this.setState({error:a.error,awaitingScore:!1,timeOver:!1});__wpcc.Q.set("userData",a.user_data);this.setState({results:a,awaitingScore:!1,timeOver:!1})})}});X(this,"_answerQuestion",a=>{var b=a.target.dataset;a=+b.question_index;b=+b.option_index;this.state.answers[a]===b&&
(b=null);const d=this.state.answers.slice();d[a]=b;__wpcc.K(__wpcc.Gb.quickSave,{subject:this.state.questions.subject,answers:d});this.setState({answers:d})});X(this,"_closePopup",()=>this.setState({timeOver:!1}));X(this,"_clearError",()=>this.setState({$AnswerError:null}));X(this,"__closeTest",()=>__wpcc.F("/profile"))}componentDidUpdate(){!this.state.timeOver||this.state.awaitingScore||this.state.results||this._submit()}componentDidMount(){if(!jc.isLoggedIn)return __wpcc.F("/");const a=(new URLSearchParams(__wpcc.H.getQs)).get("sub");
if(!a)return this.setState({error:Y.Exam$Invalid});this.setState({isFetching:!0});__wpcc.K(__wpcc.Gb.startTest,{scholar:jc.userData.scholar,subject:a.trim()}).then(a=>{if(a.error)return this.setState({error:a.error,isFetching:!1});let b=a.previous_answers||[],d;b.length&&b.some(a=>null!=a)&&(d=b);this.setState({questions:a,isFetching:!1,prevTime:+new Date,answers:d||Array(a.question_data.length).fill(null),timeLeft:a.time_allotted-(a.now-a.start_time)})})}render(a,b){return b.error?__wpcc.w(__wpcc.bb,
{reasons:[b.error],close:this.__closeTest}):b.$AnswerError?__wpcc.w(__wpcc.M,{close:this._clearError,title:Y.Exam$UnansweredQuestionsLeft,errorHead:Y.Exam$NoNegativeMarking,reasons:[b.$AnswerError]}):b.isFetching?__wpcc.w("div",{style:__wpcc.G},Y.Exam$LoadingQuestions):b.timeOver?__wpcc.w(__wpcc.M,{close:this._closePopup,title:Y.Exam$TimeUp,errorHead:Y.Exam$TimeUpAnswerSubmitInfo}):b.awaitingScore?__wpcc.w("div",{style:__wpcc.G},Y.Exam$CalculatingScore):b.results?__wpcc.w(__wpcc.M,{close:this.__closeTest,
title:Y.Exam$ResultText,errorHead:__wpcc.w(__wpcc.x,null,__wpcc.w("div",null,Y.Exam$MaximumMarks+b.results.total),__wpcc.w("div",null,Y.Exam$YourScore)),reasons:[b.results.score]}):b.questions&&__wpcc.w("div",null,__wpcc.w("div",{class:"exam-header"},"class ",b.questions.grade," - ",b.questions.subject," test"),__wpcc.w("div",{class:"total-time"},Y.Exam$TimeAllotted,__wpcc.w("span",{class:"bold"},__wpcc.Mb(b.questions.time_allotted))),__wpcc.w("span",{class:"t-left"},Y.Exam$TimeLeft,__wpcc.w(ic,{timeOver:this.timeOver,
setTimeLeft:this.timeLeft,timeLeft:b.timeLeft,prevTime:b.prevTime})),__wpcc.w("div",{class:"questions-container"},b.questions.question_data.map((a,d)=>__wpcc.w(fc,{x:a,i:d,setOption:b.timeOver?null:this._answerQuestion,answered:b.answers[d]}))),__wpcc.w("button",{class:"submit-exam hoverable",onClick:this._submit},Y.Exam$Submit))}};__wpcc.Eb={};__wpcc.Eb.default=kc;});
