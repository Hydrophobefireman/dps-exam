webpackJsonp([5], function(__wpcc){'use strict';var kc=function(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a},W=function(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a};
var lc=class extends __wpcc.A{constructor(...a){super(...a);kc(this,"tFix",a=>{a=""+a;return(1===a.length?"0":"")+a});kc(this,"__startTicks",()=>this.parseTime())}parseTime(){var a=this.props;const b=+new Date;a=a.timeLeft-(b-a.prevTime)/1E3;const c=Math.floor(a/3600);var d=a%3600;const e=Math.floor(d/60);d=Math.round(d%60);this.props.setTimeLeft(a,b);this.setState({hours:c,mins:e,sec:d})}componentDidUpdate(){const {hours:a,mins:b,sec:c}=this.state;if(0===a&&0===b&&0===c||[a,b,c].some(a=>0>a))return clearInterval(this.___interval),
this.props.timeOver()}componentDidMount(){this.___interval=setInterval(this.__startTicks,1E3)}componentWillUnmount(){clearInterval(this.___interval)}render(a,b){a=this.tFix;if(!("hours"in b&&"mins"in b&&"sec"in b))return"";const {hours:c,mins:d,sec:e}=b;return[c,d,e].some(a=>0>a)?"":`${a(c)}:${a(d)}:${a(e)}`}};const mc=__wpcc.O.getStore(),X=__wpcc.O.getStrings();
var nc=class extends __wpcc.A{constructor(...a){super(...a);W(this,"state",{isFetching:!1,questions:null,answers:null,timeOver:!1});W(this,"timeOver",()=>{this.setState({timeOver:!0,forceSubmit:!0,answers:this.state.answers.slice().map(a=>null==a?-1:a)})});W(this,"timeLeft",(a,c)=>this.setState({timeLeft:a,prevTime:c}));W(this,"_submit",()=>{if(!this.state.results&&!this.state.awaitingScore){var a=this.state.answers,c=mc.userData.scholar,d=this.state.questions.subject;if(!this.state.forceSubmit){const b=
[];a.forEach((a,c)=>null==a&&b.push(c+1));if(b.length)return this.setState({$AnswerError:b.join(", ")})}this.setState({awaitingScore:!0});__wpcc.H(__wpcc.R.gradeTest,{scholar:c,subject:d,answers:a}).then(a=>{if(a.error)return this.setState({error:a.error,awaitingScore:!1,timeOver:!1});__wpcc.O.set("userData",a.user_data);this.setState({results:a,awaitingScore:!1,timeOver:!1})})}});W(this,"_answerQuestion",a=>{var b=a.target.dataset;a=+b.question_index;b=+b.option_index;this.state.answers[a]===b&&
(b=null);const d=this.state.answers.slice();d[a]=b;__wpcc.H(__wpcc.R.quickSave,{subject:this.state.questions.subject,answers:d});this.setState({answers:d})});W(this,"_closePopup",()=>this.setState({timeOver:!1}));W(this,"_clearError",()=>this.setState({$AnswerError:null}));W(this,"__closeTest",()=>__wpcc.D("/profile"))}componentDidUpdate(){!this.state.timeOver||this.state.awaitingScore||this.state.results||this._submit()}componentDidMount(){if(!mc.isLoggedIn)return __wpcc.D("/");const a=(new URLSearchParams(__wpcc.F.getQs)).get("sub");
if(!a)return this.setState({error:X.Exam$Invalid});this.setState({isFetching:!0});__wpcc.H(__wpcc.R.startTest,{scholar:mc.userData.scholar,subject:a.trim()}).then(a=>{if(a.error)return this.setState({error:a.error,isFetching:!1});let b=a.previous_answers||[],d;b.length&&b.some(a=>null!=a)&&(d=b);this.setState({questions:a,isFetching:!1,prevTime:+new Date,answers:d||Array(a.question_data.length).fill(null),timeLeft:a.time_allotted-(a.now-a.start_time)})})}render(a,b){return b.error?__wpcc.w(__wpcc.fb,
{reasons:[b.error],close:this.__closeTest}):b.$AnswerError?__wpcc.w(__wpcc.J,{close:this._clearError,title:X.Exam$UnansweredQuestionsLeft,errorHead:X.Exam$NoNegativeMarking,reasons:[b.$AnswerError]}):b.isFetching?__wpcc.w("div",{style:__wpcc.E},X.Exam$LoadingQuestions):b.timeOver?__wpcc.w(__wpcc.J,{close:this._closePopup,title:X.Exam$TimeUp,errorHead:X.Exam$TimeUpAnswerSubmitInfo}):b.awaitingScore?__wpcc.w("div",{style:__wpcc.E},X.Exam$CalculatingScore):b.results?__wpcc.w(__wpcc.J,{close:this.__closeTest,
title:X.Exam$ResultText,errorHead:__wpcc.w(__wpcc.x,null,__wpcc.w("div",null,X.Exam$MaximumMarks+b.results.total),__wpcc.w("div",null,X.Exam$YourScore)),reasons:[b.results.score]}):b.questions&&__wpcc.w("div",null,__wpcc.w("div",{class:"exam-header"},"class ",b.questions.grade," - ",b.questions.subject," test"),__wpcc.w("div",{class:"total-time"},X.Exam$TimeAllotted,__wpcc.w("span",{class:"bold"},__wpcc.Wb(b.questions.time_allotted))),__wpcc.w("span",{class:"t-left"},X.Exam$TimeLeft,__wpcc.w(lc,{timeOver:this.timeOver,
setTimeLeft:this.timeLeft,timeLeft:b.timeLeft,prevTime:b.prevTime})),__wpcc.w("div",{class:"questions-container"},b.questions.question_data.map((a,d)=>__wpcc.w(__wpcc.mb,{x:a,i:d,setOption:b.timeOver?null:this._answerQuestion,answered:b.answers[d]}))),__wpcc.w("button",{class:"submit-exam hoverable",onClick:this._submit},X.Exam$Submit))}};__wpcc.Ob={};__wpcc.Ob.default=nc;});
